expensives
tags

{
	"id":1,
	"expense_id": "edesur_lanus",
	"tag": "tax",
	"date": "29-01-2016",
	"mount": "100",
	"type": "mandatory"
}

types:
mandatory
extra

expense_id:
edesur_lanus
edenor_santafe

tags:
tax
food
other


account

{
	"id": 1,
	"name": "dario villanustre",
	"salary": "1000"
}

CREATE DATABASE taxpanel;

CREATE TABLE expensive (id VARCHAR(50), description VARCHAR(120), status VARCHAR(20) DEFAULT 'ACTIVE', PRIMARY KEY(id));
// --> NO VA CREATE TABLE tag (id VARCHAR(50), description VARCHAR(120), PRIMARY KEY(id));
CREATE TABLE user (id INT(10) NOT NULL AUTO_INCREMENT, name VARCHAR(120), salary INT(10), PRIMARY KEY(id));

CREATE TABLE log(id INT(10) NOT NULL AUTO_INCREMENT, expensive_id VARCHAR(50), tag_id VARCHAR(50), mount INT(10), date timestamp default CURRENT_TIMESTAMP not null, PRIMARY KEY(id));

recurso para consultar los gastos de un usuario en particular del ultimo mes (con total y demas caract. utiles)
recurso para estimar inflacion o aumento de impuestos y ver como estamos parados? que devuelva el % de sueldo acumulado, gastado y por gastar.

mandatory
other
extra


salary - total pagado > 0 OK VERDE
salary - total pagado < 0 - RED

recurso por expensive_id
/expensives/inflation -> que indica el promedio de toda la base como fue aumentando y disminuyendo ese tax id

{
	"expensive_id":"edenor_santafe",
	"last_mount": 30,
	"average_mount": 20,
	"inflation_percentaje":66, // (average*100) / mount
	"month_logs": 30
}

futuro:
30 -> 66% inflacion
12 -> X = 26,4% de inflacion


10+12+14+16+18+20+22+24+26+28+30

ahora: 30
promedio: 20

30 100
20

/users/1/salary -> indica como estoy en el ultimo mes (podria indicarle un mes tmb ej: ENE-2016 o 01-2016)

{
	"date":"20-01-2016",
	"salary":"10000",
	"salary_used":1500,
	"salary_extra":800,
	"status": "GREEN",
	"expensives":Â {
		"mandatories" : [
			{"expensive_id":"alquiler", "mount":"120"},
			{"expensive_id":"gas", "mount":"120"},
			{"expensive_id":"luz", "mount":"12"},
			{"expensive_id":"coto", "mount":"43"},
			{"expensive_id":"abril", "mount":"10"},
		],
		"extras" : [
			{"expensive_id":"expensas_mm", "mount":"580"},
			{"expensive_id":"galeno_le", "mount":"1000"},
		]
	}
}

/salary?future=1&user=1
{
	"date":"20-01-2017",
	"salary":"10000",
	"salary_used":1500,
	"salary_extra":800,
	"status": "RED",
	"mandatories" : [
		{"expensive_id":"alquiler", "mount":"120"},
		{"expensive_id":"gas", "mount":"120"},
		{"expensive_id":"luz", "mount":"12"},
		{"expensive_id":"coto", "mount":"43"},
		{"expensive_id":"abril", "mount":"10"},
	],
	"extras" : [
		{"expensive_id":"expensas_mm", "mount":"580"},
		{"expensive_id":"galeno_le", "mount":"1000"},
	]
}

-chequear las expensives que estan habilitadas antes de consultar cualquier log y de ir a armar el salario o el futuro





curl -v -X POST -d '{"expensive_id":"ABL_SANTAFE", "tag_id":"mandatory", "mount":"145"}' localhost:8080/logs
delete from log where expensive_id = 'COMIDA_MENSUAL';

curl -v -X POST -d '{"expensive_id":"ABL_SANTAFE", "tag_id":"mandatory", "mount":"146"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"ALQUILER", "tag_id":"mandatory", "mount":"4200"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"AROMATIZADORES", "tag_id":"mandatory", "mount":"120"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"AYSA_LANUS", "tag_id":"mandatory", "mount":"67"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"AYSA_SANTAFE", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"CABLEVISION_LANUS", "tag_id":"mandatory", "mount":"423"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"CARGA_SUBE", "tag_id":"mandatory", "mount":"300"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"COMIDA_MENSUAL", "tag_id":"mandatory", "mount":"2000"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"CORTE_PELO_ALVI", "tag_id":"mandatory", "mount":"100"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"CUOTA_MAMA", "tag_id":"mandatory", "mount":"2400"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"DAVINCI", "tag_id":"mandatory", "mount":"1900"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"DESPARACITANTE_ABRIL", "tag_id":"mandatory", "mount":"100"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"DOPING_LEO", "tag_id":"mandatory", "mount":"800"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EDENOR_CARRANZA", "tag_id":"mandatory", "mount":"40"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EDENOR_SANTAFE", "tag_id":"mandatory", "mount":"40"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EDESUR_LANUS", "tag_id":"mandatory", "mount":"69"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EXPENSAS_CARRANZA", "tag_id":"mandatory", "mount":"590"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EXPENSAS_SANTAFE", "tag_id":"mandatory", "mount":"1349"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"EXTRA_HOGAR_ABUELA", "tag_id":"mandatory", "mount":"500"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"GALENO_LEO", "tag_id":"mandatory", "mount":"1000"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"GYM_EVE", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"INMOBILIARIO_LANUS", "tag_id":"mandatory", "mount":"137"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"INSTITUTO_LEO", "tag_id":"mandatory", "mount":"1000"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"LIMPIEZA_CARRANZA", "tag_id":"mandatory", "mount":"680"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"METROGAS_CARRANZA", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"METROGAS_LANUS", "tag_id":"mandatory", "mount":"43"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"METROGAS_SANTAFE", "tag_id":"mandatory", "mount":"71"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"MOVISTAR", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"MUNICIPALIDAD_LANUS", "tag_id":"mandatory", "mount":"263"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PANIALES_ABUELA", "tag_id":"mandatory", "mount":"450"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PASTILLAS_EVE", "tag_id":"mandatory", "mount":"50"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PERSONAL_LEO", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PIEDRITAS_ABRIL", "tag_id":"mandatory", "mount":"40"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PIPETA_ABRIL", "tag_id":"mandatory", "mount":"50"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"PSICOLOGO", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"REMEDIOS_ABUELA", "tag_id":"mandatory", "mount":"500"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"TARJETA_AMEX", "tag_id":"mandatory", "mount":"1000"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"TARJETA_VISA", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"TELECOM_CARRANZA", "tag_id":"mandatory", "mount":"347"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"TELECOM_SANTAFE", "tag_id":"mandatory", "mount":"401"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"TIRAS_MAMA", "tag_id":"mandatory", "mount":"440"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"UAI", "tag_id":"mandatory", "mount":"3040"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"VENTOLIN", "tag_id":"mandatory", "mount":"100"}' localhost:8080/logs
curl -v -X POST -d '{"expensive_id":"VIAJE_ALVI", "tag_id":"mandatory", "mount":"1"}' localhost:8080/logs


select round(avg(mount)) from log where tag_id = 'mandatory' and expensive_id in (select id from expensive where status = 'ACTIVE');


mysqldump -u root -p taxpanel > /home/dvillanustre/mercadolibre/workspace/src/taxpanel/taxpanel_bkp.sql

backup / restore DATABASE
https://www.digitalocean.com/community/tutorials/how-to-backup-mysql-databases-on-an-ubuntu-vps


tar -zcvf taxpanel.tar.gz taxpanel
